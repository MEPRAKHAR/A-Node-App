{"ast":null,"code":"import _toConsumableArray from\"/Users/PrakharGupta/Major-1/node_modules/@babel/runtime/helpers/esm/toConsumableArray.js\";import _objectSpread from\"/Users/PrakharGupta/Major-1/node_modules/@babel/runtime/helpers/esm/objectSpread2.js\";import _slicedToArray from\"/Users/PrakharGupta/Major-1/node_modules/@babel/runtime/helpers/esm/slicedToArray.js\";// src/components/ChatBox.js\nimport React,{useState,useEffect,useRef}from'react';import moment from'moment';import'./ChatBox.css';import{jsx as _jsx}from\"react/jsx-runtime\";import{jsxs as _jsxs}from\"react/jsx-runtime\";var ChatBox=function ChatBox(_ref){var socketRef=_ref.socketRef,username=_ref.username,roomId=_ref.roomId;var _useState=useState(''),_useState2=_slicedToArray(_useState,2),message=_useState2[0],setMessage=_useState2[1];var _useState3=useState([]),_useState4=_slicedToArray(_useState3,2),messages=_useState4[0],setMessages=_useState4[1];var messageContainerRef=useRef(null);var sendMessage=function sendMessage(){if(!message)return;var messageData={name:username,message:message,dateTime:new Date(),roomId:roomId// Make sure to include the roomId\n};socketRef.current.emit('message',messageData);// Emit message to the server\naddMessageToUI(true,messageData);setMessage('');};var addMessageToUI=function addMessageToUI(isOwnMessage,data){var newMessage=_objectSpread(_objectSpread({},data),{},{isOwnMessage:isOwnMessage});setMessages(function(prevMessages){return[].concat(_toConsumableArray(prevMessages),[newMessage]);});};var scrollToBottom=function scrollToBottom(){if(messageContainerRef.current){messageContainerRef.current.scrollTop=messageContainerRef.current.scrollHeight;}};useEffect(function(){if(socketRef.current){socketRef.current.on('chat-message',function(data){addMessageToUI(false,data);});socketRef.current.on('feedback',function(data){addFeedback(data.feedback);});}scrollToBottom();},[messages]);var handleInput=function handleInput(e){return setMessage(e.target.value);};var handleSubmit=function handleSubmit(e){e.preventDefault();sendMessage();};return/*#__PURE__*/_jsxs(\"div\",{className:\"chatBox\",children:[/*#__PURE__*/_jsx(\"div\",{className:\"messages\",ref:messageContainerRef,children:messages.map(function(msg,index){return/*#__PURE__*/_jsxs(\"div\",{className:\"message \".concat(msg.isOwnMessage?'own':'other'),children:[/*#__PURE__*/_jsxs(\"p\",{children:[/*#__PURE__*/_jsx(\"strong\",{children:msg.name}),\": \",msg.message]}),/*#__PURE__*/_jsx(\"span\",{children:moment(msg.dateTime).fromNow()})]},index);})}),/*#__PURE__*/_jsxs(\"form\",{onSubmit:handleSubmit,children:[/*#__PURE__*/_jsx(\"input\",{type:\"text\",value:message,onChange:handleInput,placeholder:\"Type a message...\"}),/*#__PURE__*/_jsx(\"button\",{type:\"submit\",children:\"Send\"})]})]});};export default ChatBox;","map":{"version":3,"sources":["/Users/PrakharGupta/Major-1/src/components/ChatBox.js"],"names":["React","useState","useEffect","useRef","moment","ChatBox","socketRef","username","roomId","message","setMessage","messages","setMessages","messageContainerRef","sendMessage","messageData","name","dateTime","Date","current","emit","addMessageToUI","isOwnMessage","data","newMessage","prevMessages","scrollToBottom","scrollTop","scrollHeight","on","addFeedback","feedback","handleInput","e","target","value","handleSubmit","preventDefault","map","msg","index","fromNow"],"mappings":"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","sourcesContent":["// src/components/ChatBox.js\nimport React, { useState, useEffect, useRef } from 'react';\nimport moment from 'moment';\nimport './ChatBox.css';\n\nconst ChatBox = ({ socketRef, username, roomId }) => {\n    const [message, setMessage] = useState('');\n    const [messages, setMessages] = useState([]);\n    const messageContainerRef = useRef(null);\n\n    const sendMessage = () => {\n        if (!message) return;\n        const messageData = {\n            name: username,\n            message,\n            dateTime: new Date(),\n            roomId, // Make sure to include the roomId\n        };\n        socketRef.current.emit('message', messageData); // Emit message to the server\n        addMessageToUI(true, messageData);\n        setMessage('');\n    };\n\n    const addMessageToUI = (isOwnMessage, data) => {\n        const newMessage = {\n            ...data,\n            isOwnMessage,\n        };\n        setMessages((prevMessages) => [...prevMessages, newMessage]);\n    };\n\n    const scrollToBottom = () => {\n        if (messageContainerRef.current) {\n            messageContainerRef.current.scrollTop = messageContainerRef.current.scrollHeight;\n        }\n    };\n\n    useEffect(() => {\n        if (socketRef.current) {\n            socketRef.current.on('chat-message', (data) => {\n                addMessageToUI(false, data);\n            });\n\n            socketRef.current.on('feedback', (data) => {\n                addFeedback(data.feedback);\n            });\n        }\n        scrollToBottom();\n    }, [messages]);\n\n    const handleInput = (e) => setMessage(e.target.value);\n\n    const handleSubmit = (e) => {\n        e.preventDefault();\n        sendMessage();\n    };\n\n    return (\n        <div className=\"chatBox\">\n            <div className=\"messages\" ref={messageContainerRef}>\n                {messages.map((msg, index) => (\n                    <div\n                        key={index}\n                        className={`message ${msg.isOwnMessage ? 'own' : 'other'}`}\n                    >\n                        <p>\n                            <strong>{msg.name}</strong>: {msg.message}\n                        </p>\n                        <span>{moment(msg.dateTime).fromNow()}</span>\n                    </div>\n                ))}\n            </div>\n            <form onSubmit={handleSubmit}>\n                <input\n                    type=\"text\"\n                    value={message}\n                    onChange={handleInput}\n                    placeholder=\"Type a message...\"\n                />\n                <button type=\"submit\">Send</button>\n            </form>\n        </div>\n    );\n};\n\nexport default ChatBox;\n"]},"metadata":{},"sourceType":"module"}
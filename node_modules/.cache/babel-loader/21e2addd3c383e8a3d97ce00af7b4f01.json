{"ast":null,"code":"import _asyncToGenerator from\"/Users/PrakharGupta/Major-1/node_modules/@babel/runtime/helpers/esm/asyncToGenerator.js\";import _slicedToArray from\"/Users/PrakharGupta/Major-1/node_modules/@babel/runtime/helpers/esm/slicedToArray.js\";import _regeneratorRuntime from\"/Users/PrakharGupta/Major-1/node_modules/@babel/runtime/regenerator/index.js\";import React,{useEffect,createContext,useContext}from'react';import io from'socket.io-client';import{jsx as _jsx}from\"react/jsx-runtime\";var SocketContext=/*#__PURE__*/createContext();export function useSocket(roomId){var _React$useState=React.useState(null),_React$useState2=_slicedToArray(_React$useState,2),socket=_React$useState2[0],setSocket=_React$useState2[1];useEffect(function(){var options={forceNewConnection:true,reconnectionAttempt:'Infinity',timeout:10000,transports:['websocket']};var newSocket=io(process.env.REACT_APP_BACKEND_URL,options);setSocket(newSocket);return function(){if(newSocket){newSocket.disconnect();}};},[]);return socket;}export function SocketProvider(_ref){var children=_ref.children;var socket=useSocket();return/*#__PURE__*/_jsx(SocketContext.Provider,{value:socket,children:children});}export{SocketContext};export function initSocket(){return _initSocket.apply(this,arguments);}function _initSocket(){_initSocket=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime.mark(function _callee(){var socket;return _regeneratorRuntime.wrap(function _callee$(_context){while(1){switch(_context.prev=_context.next){case 0:socket=io(process.env.REACT_APP_BACKEND_URL);_context.next=3;return new Promise(function(resolve){socket.on('connect',function(){resolve();});});case 3:return _context.abrupt(\"return\",socket);case 4:case\"end\":return _context.stop();}}},_callee);}));return _initSocket.apply(this,arguments);}","map":{"version":3,"sources":["/Users/PrakharGupta/Major-1/src/socket.js"],"names":["React","useEffect","createContext","useContext","io","SocketContext","useSocket","roomId","useState","socket","setSocket","options","forceNewConnection","reconnectionAttempt","timeout","transports","newSocket","process","env","REACT_APP_BACKEND_URL","disconnect","SocketProvider","children","initSocket","Promise","resolve","on"],"mappings":"sVAAA,MAAOA,CAAAA,KAAP,EAAgBC,SAAhB,CAA2BC,aAA3B,CAA0CC,UAA1C,KAA4D,OAA5D,CACA,MAAOC,CAAAA,EAAP,KAAe,kBAAf,C,2CAEA,GAAMC,CAAAA,aAAa,cAAGH,aAAa,EAAnC,CAEA,MAAO,SAASI,CAAAA,SAAT,CAAmBC,MAAnB,CAA2B,CAChC,oBAA4BP,KAAK,CAACQ,QAAN,CAAe,IAAf,CAA5B,oDAAOC,MAAP,qBAAeC,SAAf,qBAEAT,SAAS,CAAC,UAAM,CACd,GAAMU,CAAAA,OAAO,CAAG,CACdC,kBAAkB,CAAE,IADN,CAEdC,mBAAmB,CAAE,UAFP,CAGdC,OAAO,CAAE,KAHK,CAIdC,UAAU,CAAE,CAAC,WAAD,CAJE,CAAhB,CAOA,GAAMC,CAAAA,SAAS,CAAGZ,EAAE,CAACa,OAAO,CAACC,GAAR,CAAYC,qBAAb,CAAoCR,OAApC,CAApB,CAEAD,SAAS,CAACM,SAAD,CAAT,CAEA,MAAO,WAAM,CACX,GAAIA,SAAJ,CAAe,CACbA,SAAS,CAACI,UAAV,GACD,CACF,CAJD,CAKD,CAjBQ,CAiBN,EAjBM,CAAT,CAmBA,MAAOX,CAAAA,MAAP,CACD,CAED,MAAO,SAASY,CAAAA,cAAT,MAAsC,IAAZC,CAAAA,QAAY,MAAZA,QAAY,CAC3C,GAAMb,CAAAA,MAAM,CAAGH,SAAS,EAAxB,CAEA,mBACE,KAAC,aAAD,CAAe,QAAf,EAAwB,KAAK,CAAEG,MAA/B,UACGa,QADH,EADF,CAKD,CAGD,OAASjB,aAAT,EACA,eAAsBkB,CAAAA,UAAtB,6C,2FAAO,8IACGd,MADH,CACYL,EAAE,CAACa,OAAO,CAACC,GAAR,CAAYC,qBAAb,CADd,uBAEG,IAAIK,CAAAA,OAAJ,CAAY,SAAAC,OAAO,CAAI,CAC3BhB,MAAM,CAACiB,EAAP,CAAU,SAAV,CAAqB,UAAM,CACzBD,OAAO,GACR,CAFD,EAGD,CAJK,CAFH,wCAOIhB,MAPJ,wD","sourcesContent":["import React, { useEffect, createContext, useContext } from 'react';\nimport io from 'socket.io-client';\n\nconst SocketContext = createContext(); \n\nexport function useSocket(roomId) {\n  const [socket, setSocket] = React.useState(null);\n\n  useEffect(() => {\n    const options = {\n      forceNewConnection: true,\n      reconnectionAttempt: 'Infinity',\n      timeout: 10000,\n      transports: ['websocket'],\n    };\n\n    const newSocket = io(process.env.REACT_APP_BACKEND_URL, options);\n\n    setSocket(newSocket);\n\n    return () => {\n      if (newSocket) {\n        newSocket.disconnect();\n      }\n    };\n  }, []);\n\n  return socket;\n}\n\nexport function SocketProvider({ children }) {\n  const socket = useSocket();\n\n  return (\n    <SocketContext.Provider value={socket}>\n      {children}\n    </SocketContext.Provider>\n  );\n}\n\n\nexport { SocketContext }; \nexport async function initSocket() {\n    const socket = io(process.env.REACT_APP_BACKEND_URL);\n    await new Promise(resolve => {\n      socket.on('connect', () => {\n        resolve();\n      });\n    });\n    return socket;\n  }"]},"metadata":{},"sourceType":"module"}